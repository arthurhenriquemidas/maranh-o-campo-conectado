<!-- Layout do Wizard de Registro -->
<div class="wizard-layout">
  
  <!-- Container Principal -->
  <div class="wizard-container">
    <div class="container">
      <div class="grid justify-content-center">
        <div class="col-12 md:col-8 lg:col-6">
          
          <!-- Card do Wizard -->
          <p-card class="wizard-card">
            
            <!-- Header -->
            <ng-template pTemplate="header">
              <div class="wizard-header text-center">
                <i class="pi pi-user-plus text-6xl text-primary mb-3"></i>
                <h1 class="text-3xl font-bold text-900 m-0 mb-2">Criar Conta</h1>
                <p class="text-600 m-0">Siga os passos para criar sua conta</p>
              </div>
            </ng-template>

            <!-- Steps Progress -->
            <div *ngIf="!registroCompleto" class="mb-4">
              <p-steps 
                [model]="steps" 
                [activeIndex]="currentStep">
              </p-steps>
            </div>

            <!-- Etapa 1: Tipo de Usuário -->
            <div *ngIf="currentStep === 0 && !registroCompleto">
              <form [formGroup]="tipoForm">
                
                <h3 class="text-xl font-semibold mb-4 text-center">Tipo de Conta</h3>
                
                <!-- Seleção Cliente/Advogado -->
                <div class="grid mb-4">
                  <div class="col-12 md:col-6">
                    <div class="tipo-option p-3 border-round cursor-pointer text-center"
                         [class.selected]="tipoUsuario === 'cliente'"
                         (click)="tipoForm.patchValue({tipoUsuario: 'cliente'}); onTipoUsuarioChange()">
                      <i class="pi pi-user text-4xl mb-2" 
                         [class.text-primary]="tipoUsuario === 'cliente'"
                         [class.text-400]="tipoUsuario !== 'cliente'"></i>
                      <h4 class="font-semibold mb-1">Cliente</h4>
                      <p class="text-600 text-sm m-0">Preciso de serviços jurídicos</p>
                    </div>
                  </div>
                  <div class="col-12 md:col-6">
                    <div class="tipo-option p-3 border-round cursor-pointer text-center"
                         [class.selected]="tipoUsuario === 'advogado'"
                         (click)="tipoForm.patchValue({tipoUsuario: 'advogado'}); onTipoUsuarioChange()">
                      <i class="pi pi-balance-scale text-4xl mb-2"
                         [class.text-primary]="tipoUsuario === 'advogado'"
                         [class.text-400]="tipoUsuario !== 'advogado'"></i>
                      <h4 class="font-semibold mb-1">Advogado</h4>
                      <p class="text-600 text-sm m-0">Sou profissional do direito</p>
                    </div>
                  </div>
                </div>

              </form>
            </div>

            <!-- Etapa 2: Dados Pessoais -->
            <div *ngIf="currentStep === 1 && !registroCompleto">
              <form [formGroup]="dadosForm">
                
                <h3 class="text-xl font-semibold mb-4 text-center">Dados Pessoais</h3>
                
                <div class="grid">
                  
                  <!-- Nome -->
                  <div class="col-12">
                    <div class="field">
                      <label for="nome" class="block text-900 font-medium mb-2">
                        Nome Completo <span class="text-red-500">*</span>
                      </label>
                      <input 
                        id="nome"
                        type="text" 
                        pInputText 
                        formControlName="nome"
                        placeholder="Digite seu nome completo"
                        class="w-full">
                    </div>
                  </div>

                  <!-- Email e Telefone -->
                  <div class="col-12 md:col-6">
                    <div class="field">
                      <label for="email" class="block text-900 font-medium mb-2">
                        E-mail <span class="text-red-500">*</span>
                      </label>
                      <input 
                        id="email"
                        type="email" 
                        pInputText 
                        formControlName="email"
                        placeholder="seu@email.com"
                        class="w-full">
                    </div>
                  </div>

                  <div class="col-12 md:col-6">
                    <div class="field">
                      <label for="telefone" class="block text-900 font-medium mb-2">
                        Telefone <span class="text-red-500">*</span>
                      </label>
                      <input 
                        id="telefone"
                        type="text" 
                        pInputText 
                        formControlName="telefone"
                        placeholder="(11) 99999-9999"
                        class="w-full">
                    </div>
                  </div>

                  <!-- Senhas -->
                  <div class="col-12 md:col-6">
                    <div class="field">
                      <label for="password" class="block text-900 font-medium mb-2">
                        Senha <span class="text-red-500">*</span>
                      </label>
                      <input 
                        id="password"
                        type="password" 
                        pInputText 
                        formControlName="password"
                        placeholder="Mínimo 6 caracteres"
                        class="w-full">
                    </div>
                  </div>

                  <div class="col-12 md:col-6">
                    <div class="field">
                      <label for="confirmPassword" class="block text-900 font-medium mb-2">
                        Confirmar Senha <span class="text-red-500">*</span>
                      </label>
                      <input 
                        id="confirmPassword"
                        type="password" 
                        pInputText 
                        formControlName="confirmPassword"
                        placeholder="Repita a senha"
                        class="w-full">
                    </div>
                  </div>

                </div>

              </form>
            </div>

            <!-- Etapa 3: Confirmação -->
            <div *ngIf="currentStep === 2 && !registroCompleto">
              <form [formGroup]="confirmacaoForm">
                
                <h3 class="text-xl font-semibold mb-4 text-center">Finalizar</h3>
                
                <!-- Termos -->
                <div class="field mb-4">
                  <div class="flex align-items-center">
                    <p-checkbox 
                      formControlName="termos"
                      [binary]="true"
                      inputId="termos">
                    </p-checkbox>
                    <label for="termos" class="ml-2">
                      Aceito os termos de uso <span class="text-red-500">*</span>
                    </label>
                  </div>
                </div>

              </form>
            </div>

            <!-- Registro Completo -->
            <div *ngIf="registroCompleto" class="text-center">
              <i class="pi pi-check-circle text-6xl text-green-500 mb-4"></i>
              <h3 class="text-xl font-semibold text-900 mb-3">Cadastro Realizado!</h3>
              <p class="text-600 mb-4">Sua conta foi criada com sucesso.</p>
              <p-button 
                label="Fazer Login"
                icon="pi pi-sign-in"
                (onClick)="irParaLogin()">
              </p-button>
            </div>

            <!-- Footer com Navegação -->
            <ng-template pTemplate="footer">
              <div *ngIf="!registroCompleto" class="flex justify-content-between">
                
                <!-- Botão Voltar -->
                <p-button 
                  *ngIf="currentStep > 0"
                  label="Voltar"
                  icon="pi pi-arrow-left"
                  severity="secondary"
                  outlined="true"
                  (onClick)="prevStep()">
                </p-button>
                
                <div *ngIf="currentStep === 0"></div>

                <!-- Botão Próximo/Finalizar -->
                <p-button 
                  [label]="isLastStep ? 'Finalizar' : 'Próximo'"
                  [icon]="isLastStep ? 'pi pi-check' : 'pi pi-arrow-right'"
                  [loading]="loading"
                  [disabled]="!canProceed"
                  (onClick)="isLastStep ? finalizarRegistro() : nextStep()">
                </p-button>

              </div>
            </ng-template>

          </p-card>

        </div>
      </div>
    </div>
  </div>

</div>

<!-- Toast -->
<p-toast position="top-right"></p-toast>

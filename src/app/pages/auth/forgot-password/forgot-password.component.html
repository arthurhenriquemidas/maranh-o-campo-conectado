<!-- Layout de Recuperação de Senha -->
<div class="auth-wrapper">
  
  <!-- Container Principal -->
  <div class="auth-container">
    
   
    <!-- Card de Recuperação -->
    <p-card class="auth-card">

      <!-- Header -->
      <div class="auth-header text-center">
        <i class="pi pi-key text-primary text-6xl mb-3" style="color: #000;"></i>
        <h1 class="auth-title" style="color: #000;">Recuperar Senha</h1>
        <p class="auth-subtitle" style="color: #000;">
          {{ emailEnviado ? 'E-mail enviado com sucesso!' : 'Digite seu e-mail para receber as instruções de recuperação' }}
        </p>
      </div>
    
      <!-- Formulário ou Confirmação -->
      <div *ngIf="!emailEnviado">
        
        <!-- Instruções -->
        <div class="instructions-box p-4 border-round mb-4" style="background: var(--primary-50); border: 1px solid var(--primary-200);">
          <div class="flex align-items-start">
           
            <div>
              <h6 class="text-primary font-semibold mb-2"> <i class="pi pi-info-circle text-primary mr-3 mt-1"></i>Como funciona a recuperação de senha:</h6>
              <ul class="text-700 m-0 pl-3 line-height-3">
                <li>Digite o e-mail cadastrado na sua conta</li>
                <li>Você receberá um link de recuperação por e-mail</li>
                <li>Clique no link e defina uma nova senha</li>
                <li>O link expira em 24 horas por segurança</li>
              </ul>
            </div>
          </div>
        </div>
        
        <!-- Formulário -->
        <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()">
          
          <!-- Campo E-mail -->
          <div class="field mb-4">
            <label for="email" class="block text-900 font-medium mb-2">
              E-mail <span class="text-red-500">*</span>
            </label>
            <span class="p-input-icon-left w-full">
              <i class="pi pi-envelope" style="padding-top: 1rem;"></i>
              <input 
                id="email"
                type="email" 
                style="padding-left: 2rem;"
                pInputText 
                formControlName="email"
                placeholder="Digite seu e-mail cadastrado"
                class="w-full modern-input"
                [class.ng-invalid]="emailInvalid"
                [class.ng-dirty]="email?.touched">
            </span>
            
            <!-- Mensagens de Erro -->
            <small *ngIf="emailInvalid" class="p-error block mt-1">
              <span *ngIf="email?.errors?.['required']">E-mail é obrigatório</span>
              <span *ngIf="email?.errors?.['email']">E-mail inválido</span>
            </small>
          </div>

          <!-- Botão Enviar -->
          <p-button 
            type="submit"
            label="Enviar Instruções"
            icon="pi pi-send"
            styleClass="w-full mb-3"
            [loading]="loading"
            [disabled]="forgotPasswordForm.invalid">
          </p-button>

        </form>

        <!-- Link para Login -->
        <div class="text-center">
          <p class="text-600 mb-2">Lembrou da senha?</p>
          <p-button 
            label="Voltar ao Login"
            icon="pi pi-arrow-left"
            styleClass="p-button-text"
            (onClick)="voltarParaLogin()">
          </p-button>
        </div>

      </div>

      <!-- Confirmação de E-mail Enviado -->
      <div *ngIf="emailEnviado" class="text-center">
        
        <!-- Ícone de Sucesso -->
        <div class="success-icon mb-4">
          <i class="pi pi-check-circle text-6xl text-green-500"></i>
        </div>

        <!-- Mensagem -->
        <h3 class="text-xl font-semibold text-900 mb-3">E-mail Enviado!</h3>
        <p class="text-600 mb-4 line-height-3">
          Enviamos as instruções para recuperação de senha para o seu e-mail. 
          Verifique sua caixa de entrada e spam.
        </p>

        <!-- Informações Adicionais -->
        <div class="info-box p-4 border-round mb-4" style="background: var(--green-50); border: 1px solid var(--green-200);">
          <div class="flex align-items-start">
            <i class="pi pi-info-circle text-green-600 mr-3 mt-1"></i>
            <div class="text-left">
              <p class="text-green-700 m-0 mb-2 font-medium">Próximos passos:</p>
              <ul class="text-green-600 m-0 pl-3 line-height-3">
                <li>Verifique sua caixa de entrada e spam</li>
                <li>Clique no link de recuperação recebido</li>
                <li>Defina uma nova senha segura</li>
                <li>Faça login com sua nova senha</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Aviso de Segurança -->
        <div class="security-warning p-3 border-round mb-4" style="background: var(--orange-50); border: 1px solid var(--orange-200);">
          <div class="flex align-items-start">
            <i class="pi pi-shield text-orange-600 mr-2 mt-1"></i>
            <div class="text-left">
              <p class="text-orange-700 m-0 text-sm">
                <strong>Importante:</strong> O link de recuperação expira em 24 horas por segurança. 
                Se não receber o e-mail, verifique sua pasta de spam.
              </p>
            </div>
          </div>
        </div>

        <!-- Ações -->
        <div class="flex gap-2 justify-content-center">
          <p-button 
            label="Reenviar E-mail"
            icon="pi pi-refresh"
            severity="secondary"
            outlined="true"
            (onClick)="reenviarEmail()">
          </p-button>
          
          <p-button 
            label="Voltar ao Login"
            icon="pi pi-arrow-left"
            (onClick)="voltarParaLogin()">
          </p-button>
        </div>

      </div>

    </p-card>

  </div>
</div>

<!-- Toast para notificações -->
<p-toast position="top-right"></p-toast>